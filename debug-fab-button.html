<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAB æŒ‰éˆ•èª¿è©¦</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="flame-theme.css">
    <style>
        body {
            padding: 20px;
            font-family: 'Microsoft JhengHei', sans-serif;
            background: #FDF5E6;
        }
        .debug-info {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .fab-status {
            background: rgba(212, 44, 44, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #D42C2C;
            margin: 10px 0;
        }
        .test-button {
            background: #D42C2C;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body data-theme="getrich">
    <div class="debug-info">
        <h1>ğŸ” FAB æŒ‰éˆ•èª¿è©¦å·¥å…·</h1>
        <div id="debugOutput"></div>
        
        <div class="fab-status">
            <h3>FAB æŒ‰éˆ•ç‹€æ…‹æª¢æŸ¥:</h3>
            <button class="test-button" onclick="checkFABStatus()">æª¢æŸ¥ FAB ç‹€æ…‹</button>
            <button class="test-button" onclick="forceShowFAB()">å¼·åˆ¶é¡¯ç¤º FAB</button>
            <button class="test-button" onclick="updateFABIcon()">æ›´æ–° FAB åœ–æ¨™</button>
            <button class="test-button" onclick="togglePageState()">åˆ‡æ›é é¢ç‹€æ…‹</button>
        </div>
        
        <div id="pageInfo">
            <p>ç•¶å‰é é¢ç‹€æ…‹: <span id="pageState">page-ledger</span></p>
        </div>
    </div>
    
    <!-- æ¨¡æ“¬é é¢çµæ§‹ -->
    <div class="page-ledger" id="pageLedger">
        <div class="ledger-header">
            <h2>é»˜èªå¸³æœ¬</h2>
        </div>
        <div class="ledger-list">
            <p>æ¨¡æ“¬å¸³æœ¬å…§å®¹...</p>
        </div>
        
        <!-- FAB æŒ‰éˆ• -->
        <button class="fab-btn" id="fabBtn">ğŸ’°</button>
    </div>
    
    <div class="page-input" id="pageInput" style="display: none;">
        <div class="input-page-header">
            <button class="back-btn">â†</button>
        </div>
        <div class="category-section">
            <p>è¼¸å…¥é é¢å…§å®¹...</p>
        </div>
    </div>
    
    <script src="js/theme-icons.js"></script>
    <script src="js/theme.js"></script>
    
    <script>
        let currentPage = 'ledger';
        
        function checkFABStatus() {
            const fabBtn = document.getElementById('fabBtn');
            const debugOutput = document.getElementById('debugOutput');
            
            let status = '<h3>ğŸ” FAB æŒ‰éˆ•è©³ç´°ç‹€æ…‹:</h3>';
            
            if (fabBtn) {
                status += '<p>âœ… FAB æŒ‰éˆ•å­˜åœ¨</p>';
                status += `<p>ğŸ“ ä½ç½®: ${getComputedStyle(fabBtn).position}</p>`;
                status += `<p>ğŸ“ å°ºå¯¸: ${getComputedStyle(fabBtn).width} x ${getComputedStyle(fabBtn).height}</p>`;
                status += `<p>ğŸ¨ é¡¯ç¤º: ${getComputedStyle(fabBtn).display}</p>`;
                status += `<p>ğŸ”¢ z-index: ${getComputedStyle(fabBtn).zIndex}</p>`;
                status += `<p>ğŸ“ bottom: ${getComputedStyle(fabBtn).bottom}</p>`;
                status += `<p>ğŸ“ right: ${getComputedStyle(fabBtn).right}</p>`;
                status += `<p>ğŸ­ å…§å®¹: "${fabBtn.textContent}"</p>`;
                status += `<p>ğŸ¨ èƒŒæ™¯: ${getComputedStyle(fabBtn).background}</p>`;
                status += `<p>ğŸ‘ï¸ å¯è¦‹æ€§: ${getComputedStyle(fabBtn).visibility}</p>`;
                
                // æª¢æŸ¥æ˜¯å¦è¢«å…¶ä»–å…ƒç´ è¦†è“‹
                const rect = fabBtn.getBoundingClientRect();
                status += `<p>ğŸ“ å¯¦éš›ä½ç½®: x=${rect.x}, y=${rect.y}, width=${rect.width}, height=${rect.height}</p>`;
                
                // æª¢æŸ¥çˆ¶å…ƒç´ 
                const parent = fabBtn.parentElement;
                if (parent) {
                    status += `<p>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ çˆ¶å…ƒç´ : ${parent.className}</p>`;
                    status += `<p>ğŸ¨ çˆ¶å…ƒç´ é¡¯ç¤º: ${getComputedStyle(parent).display}</p>`;
                }
            } else {
                status += '<p>âŒ FAB æŒ‰éˆ•ä¸å­˜åœ¨</p>';
            }
            
            debugOutput.innerHTML = status;
        }
        
        function forceShowFAB() {
            const fabBtn = document.getElementById('fabBtn');
            if (fabBtn) {
                fabBtn.style.display = 'flex !important';
                fabBtn.style.visibility = 'visible !important';
                fabBtn.style.opacity = '1 !important';
                fabBtn.style.zIndex = '9999 !important';
                alert('å·²å¼·åˆ¶é¡¯ç¤º FAB æŒ‰éˆ•');
            }
        }
        
        function updateFABIcon() {
            if (window.ThemeIcons && window.updateThemeButtons) {
                window.updateThemeButtons('getrich');
                alert('å·²æ›´æ–° FAB æŒ‰éˆ•åœ–æ¨™ç‚º ğŸ§§');
            } else if (typeof updateThemeButtons === 'function') {
                updateThemeButtons('getrich');
                alert('å·²æ›´æ–° FAB æŒ‰éˆ•åœ–æ¨™ç‚º ğŸ§§');
            } else {
                const fabBtn = document.getElementById('fabBtn');
                if (fabBtn) {
                    fabBtn.textContent = 'ğŸ§§';
                    alert('ç›´æ¥è¨­ç½® FAB æŒ‰éˆ•åœ–æ¨™ç‚º ğŸ§§');
                }
            }
        }
        
        function togglePageState() {
            const pageLedger = document.getElementById('pageLedger');
            const pageInput = document.getElementById('pageInput');
            const pageStateSpan = document.getElementById('pageState');
            
            if (currentPage === 'ledger') {
                pageLedger.style.display = 'none';
                pageInput.style.display = 'block';
                currentPage = 'input';
                pageStateSpan.textContent = 'page-input';
            } else {
                pageLedger.style.display = 'block';
                pageInput.style.display = 'none';
                currentPage = 'ledger';
                pageStateSpan.textContent = 'page-ledger';
            }
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('èª¿è©¦é é¢è¼‰å…¥å®Œæˆ');
            
            // ç­‰å¾…ä¸»é¡Œåˆå§‹åŒ–
            setTimeout(() => {
                checkFABStatus();
            }, 500);
        });
    </script>
</body>
</html>
