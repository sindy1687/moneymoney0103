<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºæ…§æé†’ç³»çµ±æ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover {
            background: #357abd;
        }
        .result {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            border-left: 4px solid #4a90e2;
        }
        .success {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .warning {
            background: #fff3e0;
            color: #f57c00;
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .reminder-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #4a90e2;
        }
        .reminder-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        .reminder-message {
            color: #666;
            margin-bottom: 10px;
        }
        .reminder-actions {
            display: flex;
            gap: 10px;
        }
        .reminder-action {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        .reminder-action:hover {
            background: #357abd;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”” æ™ºæ…§æé†’ç³»çµ±æ¸¬è©¦</h1>
        
        <!-- ç³»çµ±æª¢æŸ¥ -->
        <div class="section">
            <h2>ğŸ” ç³»çµ±æª¢æŸ¥</h2>
            <button onclick="checkSystem()">æª¢æŸ¥ç³»çµ±ç‹€æ…‹</button>
            <button onclick="checkPermissions()">æª¢æŸ¥é€šçŸ¥æ¬Šé™</button>
            <button onclick="requestPermissions()">è«‹æ±‚é€šçŸ¥æ¬Šé™</button>
            <div id="systemResults"></div>
        </div>
        
        <!-- æ¶ˆè²»ç¿’æ…£æé†’æ¸¬è©¦ -->
        <div class="section">
            <h2>ğŸ’° æ¶ˆè²»ç¿’æ…£æé†’æ¸¬è©¦</h2>
            
            <div class="form-group">
                <label for="consumptionType">æé†’é¡å‹</label>
                <select id="consumptionType">
                    <option value="trend">æ¶ˆè²»è¶¨å‹¢æé†’</option>
                    <option value="daily_limit">æ¯æ—¥æ¶ˆè²»é™åˆ¶</option>
                    <option value="category_alert">åˆ†é¡æ¶ˆè²»è­¦å ±</option>
                    <option value="budget_warning">é ç®—è­¦å ±</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="consumptionAmount">é‡‘é¡</label>
                <input type="number" id="consumptionAmount" placeholder="ä¾‹å¦‚: 150">
            </div>
            
            <div class="form-group">
                <label for="consumptionDescription">æè¿°</label>
                <input type="text" id="consumptionDescription" placeholder="ä¾‹å¦‚: æœ¬é€±æ¶ˆè²»å¢åŠ ">
            </div>
            
            <button onclick="testConsumptionReminder()">æ¸¬è©¦æ¶ˆè²»æé†’</button>
            <div id="consumptionResults"></div>
        </div>
        
        <!-- æŠ•è³‡æ©Ÿæœƒæé†’æ¸¬è©¦ -->
        <div class="section">
            <h2>ğŸ“ˆ æŠ•è³‡æ©Ÿæœƒæé†’æ¸¬è©¦</h2>
            
            <div class="form-group">
                <label for="investmentType">æé†’é¡å‹</label>
                <select id="investmentType">
                    <option value="cash_surplus">ç¾é‡‘éå¤šæé†’</option>
                    <option value="rebalancing">æŠ•è³‡çµ„åˆå†å¹³è¡¡</option>
                    <option value="opportunity">æŠ•è³‡æ©Ÿæœƒæé†’</option>
                    <option value="dividend">è‚¡æ¯æé†’</option>
                    <option value="market_alert">å¸‚å ´è®Šå‹•æé†’</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="investmentAmount">é‡‘é¡</label>
                <input type="number" id="investmentAmount" placeholder="ä¾‹å¦‚: 50000">
            </div>
            
            <div class="form-group">
                <label for="investmentDescription">æè¿°</label>
                <input type="text" id="investmentDescription" placeholder="ä¾‹å¦‚: å¤šé¤˜ç¾é‡‘æŠ•è³‡å»ºè­°">
            </div>
            
            <button onclick="testInvestmentReminder()">æ¸¬è©¦æŠ•è³‡æé†’</button>
            <div id="investmentResults"></div>
        </div>
        
        <!-- å¸³å–®æ”¯ä»˜æé†’æ¸¬è©¦ -->
        <div class="section">
            <h2>ğŸ“… å¸³å–®æ”¯ä»˜æé†’æ¸¬è©¦</h2>
            
            <div class="form-group">
                <label for="billType">æé†’é¡å‹</label>
                <select id="billType">
                    <option value="upcoming">å¸³å–®å³å°‡åˆ°æœŸ</option>
                    <option value="due_today">å¸³å–®ä»Šæ—¥åˆ°æœŸ</option>
                    <option value="overdue">å¸³å–®å·²éæœŸ</option>
                    <option value="paid">å¸³å–®å·²æ”¯ä»˜</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="billName">å¸³å–®åç¨±</label>
                <input type="text" id="billName" placeholder="ä¾‹å¦‚: é›»è²»">
            </div>
            
            <div class="form-group">
                <label for="billAmount">é‡‘é¡</label>
                <input type="number" id="billAmount" placeholder="ä¾‹å¦‚: 1200">
            </div>
            
            <div class="form-group">
                <label for="billDueDate">åˆ°æœŸæ—¥æœŸ</label>
                <input type="date" id="billDueDate">
            </div>
            
            <button onclick="testBillReminder()">æ¸¬è©¦å¸³å–®æé†’</button>
            <div id="billResults"></div>
        </div>
        
        <!-- å¿«é€Ÿæ¸¬è©¦ -->
        <div class="section">
            <h2>âš¡ å¿«é€Ÿæ¸¬è©¦</h2>
            <button onclick="quickTest('high_spending')">é«˜æ¶ˆè²»æé†’</button>
            <button onclick="quickTest('investment_opportunity')">æŠ•è³‡æ©Ÿæœƒæé†’</button>
            <button onclick="quickTest('bill_due')">å¸³å–®åˆ°æœŸæé†’</button>
            <button onclick="quickTest('all_types')">æ‰€æœ‰é¡å‹æé†’</button>
        </div>
        
        <!-- è¨­å®šæ¸¬è©¦ -->
        <div class="section">
            <h2>âš™ï¸ è¨­å®šæ¸¬è©¦</h2>
            <button onclick="testSettings()">æ¸¬è©¦è¨­å®šè¼‰å…¥</button>
            <button onclick="testSettingsUpdate()">æ¸¬è©¦è¨­å®šæ›´æ–°</button>
            <button onclick="showReminderHistory()">é¡¯ç¤ºæé†’æ­·å²</button>
            <button onclick="clearReminderHistory()">æ¸…é™¤æé†’æ­·å²</button>
            <div id="settingsResults"></div>
        </div>
    </div>

    <!-- è¼‰å…¥æ™ºæ…§æé†’ç³»çµ± -->
    <script src="js/smart-reminders.js"></script>
    
    <script>
        // ç³»çµ±æª¢æŸ¥
        function checkSystem() {
            const container = document.getElementById('systemResults');
            container.innerHTML = '';
            
            // æª¢æŸ¥æ¨¡çµ„è¼‰å…¥
            if (typeof SmartReminderSystem !== 'undefined') {
                showResult('systemResults', 'âœ… SmartReminderSystem æ¨¡çµ„å·²è¼‰å…¥', 'success');
                showResult('systemResults', `ç³»çµ±ç‹€æ…‹: ${SmartReminderSystem.isInitialized ? 'å·²åˆå§‹åŒ–' : 'æœªåˆå§‹åŒ–'}`, 'success');
                showResult('systemResults', `æé†’æ•¸é‡: ${SmartReminderSystem.reminders.length}`, 'success');
            } else {
                showResult('systemResults', 'âŒ SmartReminderSystem æ¨¡çµ„æœªè¼‰å…¥', 'error');
                showResult('systemResults', 'è«‹æª¢æŸ¥ js/smart-reminders.js æª”æ¡ˆæ˜¯å¦å­˜åœ¨', 'error');
            }
            
            // æª¢æŸ¥é€šçŸ¥æ”¯æ´
            if ('Notification' in window) {
                showResult('systemResults', 'âœ… ç€è¦½å™¨æ”¯æ´é€šçŸ¥åŠŸèƒ½', 'success');
                showResult('systemResults', `é€šçŸ¥æ¬Šé™: ${Notification.permission}`, 'success');
            } else {
                showResult('systemResults', 'âŒ ç€è¦½å™¨ä¸æ”¯æ´é€šçŸ¥åŠŸèƒ½', 'error');
            }
        }
        
        // æª¢æŸ¥é€šçŸ¥æ¬Šé™
        function checkPermissions() {
            const container = document.getElementById('systemResults');
            container.innerHTML = '';
            
            if ('Notification' in window) {
                const permission = Notification.permission;
                showResult('systemResults', `ç•¶å‰é€šçŸ¥æ¬Šé™: ${permission}`, 'success');
                
                if (permission === 'granted') {
                    showResult('systemResults', 'âœ… å¯ä»¥é¡¯ç¤ºç€è¦½å™¨é€šçŸ¥', 'success');
                } else if (permission === 'denied') {
                    showResult('systemResults', 'âŒ é€šçŸ¥æ¬Šé™è¢«æ‹’çµ•', 'error');
                    showResult('systemResults', 'è«‹åœ¨ç€è¦½å™¨è¨­å®šä¸­å…è¨±é€šçŸ¥', 'warning');
                } else {
                    showResult('systemResults', 'âš ï¸ å°šæœªè«‹æ±‚é€šçŸ¥æ¬Šé™', 'warning');
                }
            } else {
                showResult('systemResults', 'âŒ ç€è¦½å™¨ä¸æ”¯æ´é€šçŸ¥åŠŸèƒ½', 'error');
            }
        }
        
        // è«‹æ±‚é€šçŸ¥æ¬Šé™
        function requestPermissions() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    const container = document.getElementById('systemResults');
                    container.innerHTML = '';
                    
                    if (permission === 'granted') {
                        showResult('systemResults', 'âœ… é€šçŸ¥æ¬Šé™å·²ç²å¾—', 'success');
                    } else if (permission === 'denied') {
                        showResult('systemResults', 'âŒ é€šçŸ¥æ¬Šé™è¢«æ‹’çµ•', 'error');
                    } else {
                        showResult('systemResults', 'âš ï¸ é€šçŸ¥æ¬Šé™è«‹æ±‚å·²ç™¼é€', 'warning');
                    }
                });
            }
        }
        
        // æ¸¬è©¦æ¶ˆè²»æé†’
        function testConsumptionReminder() {
            const container = document.getElementById('consumptionResults');
            container.innerHTML = '';
            
            if (typeof SmartReminderSystem === 'undefined') {
                showResult('consumptionResults', 'âŒ SmartReminderSystem æ¨¡çµ„æœªè¼‰å…¥', 'error');
                return;
            }
            
            const type = document.getElementById('consumptionType').value;
            const amount = parseFloat(document.getElementById('consumptionAmount').value) || 0;
            const description = document.getElementById('consumptionDescription').value;
            
            if (!amount || !description) {
                showResult('consumptionResults', 'âŒ è«‹è¼¸å…¥é‡‘é¡å’Œæè¿°', 'error');
                return;
            }
            
            try {
                const data = {
                    type: type,
                    amount: amount,
                    description: description,
                    thisWeek: amount * 7,
                    lastWeek: amount * 5,
                    change: 40
                };
                
                SmartReminderSystem.createConsumptionReminder(type, data);
                showResult('consumptionResults', 'âœ… æ¶ˆè²»æé†’å·²å‰µå»º', 'success');
                
                // é¡¯ç¤ºæé†’å…§å®¹
                const reminder = {
                    title: SmartReminderSystem.getConsumptionReminderTitle(type, data),
                    message: SmartReminderSystem.getConsumptionReminderMessage(type, data)
                };
                
                const reminderDiv = document.createElement('div');
                reminderDiv.className = 'reminder-item';
                reminderDiv.innerHTML = `
                    <div class="reminder-title">${reminder.title}</div>
                    <div class="reminder-message">${reminder.message}</div>
                    <div class="reminder-actions">
                        <button class="reminder-action" onclick="this.parentElement.remove()">é—œé–‰</button>
                    </div>
                `;
                
                container.appendChild(reminderDiv);
                
            } catch (error) {
                showResult('consumptionResults', `âŒ å‰µå»ºæ¶ˆè²»æé†’å¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        // æ¸¬è©¦æŠ•è³‡æé†’
        function testInvestmentReminder() {
            const container = document.getElementById('investmentResults');
            container.innerHTML = '';
            
            if (typeof SmartReminderSystem === 'undefined') {
                showResult('investmentResults', 'âŒ SmartReminderSystem æ¨¡çµ„æœªè¼‰å…¥', 'error');
                return;
            }
            
            const type = document.getElementById('investmentType').value;
            const amount = parseFloat(document.getElementById('investmentAmount').value) || 0;
            const description = document.getElementById('investmentDescription').value;
            
            if (!amount || !description) {
                showResult('investmentResults', 'âŒ è«‹è¼¸å…¥é‡‘é¡å’Œæè¿°', 'error');
                return;
            }
            
            try {
                const data = {
                    type: type,
                    amount: amount,
                    description: description,
                    portfolioValue: amount * 10
                };
                
                SmartReminderSystem.createInvestmentReminder(type, data);
                showResult('investmentResults', 'âœ… æŠ•è³‡æé†’å·²å‰µå»º', 'success');
                
                // é¡¯ç¤ºæé†’å…§å®¹
                const reminder = {
                    title: SmartReminderSystem.getInvestmentReminderTitle(type, data),
                    message: SmartReminderSystem.getInvestmentReminderMessage(type, data)
                };
                
                const reminderDiv = document.createElement('div');
                reminderDiv.className = 'reminder-item';
                reminderDiv.innerHTML = `
                    <div class="reminder-title">${reminder.title}</div>
                    <div class="reminder-message">${reminder.message}</div>
                    <div class="reminder-actions">
                        <button class="reminder-action" onclick="this.parentElement.remove()">é—œé–‰</button>
                    </div>
                `;
                
                container.appendChild(reminderDiv);
                
            } catch (error) {
                showResult('investmentResults', `âŒ å‰µå»ºæŠ•è³‡æé†’å¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        // æ¸¬è©¦å¸³å–®æé†’
        function testBillReminder() {
            const container = document.getElementById('billResults');
            container.innerHTML = '';
            
            if (typeof SmartReminderSystem === 'undefined') {
                showResult('billResults', 'âŒ SmartReminderSystem æ¨¡çµ„æœªè¼‰å…¥', 'error');
                return;
            }
            
            const type = document.getElementById('billType').value;
            const name = document.getElementById('billName').value;
            const amount = parseFloat(document.getElementById('billAmount').value) || 0;
            const dueDate = document.getElementById('billDueDate').value;
            
            if (!name || !amount || !dueDate) {
                showResult('billResults', 'âŒ è«‹è¼¸å…¥å¸³å–®è³‡è¨Š', 'error');
                return;
            }
            
            try {
                const data = {
                    bill: {
                        id: `test_${Date.now()}`,
                        name: name,
                        amount: amount,
                        dueDate: dueDate,
                        paid: false
                    },
                    daysUntilDue: 3,
                    daysOverdue: 0
                };
                
                SmartReminderSystem.createBillReminder(type, data);
                showResult('billResults', 'âœ… å¸³å–®æé†’å·²å‰µå»º', 'success');
                
                // é¡¯ç¤ºæé†’å…§å®¹
                const reminder = {
                    title: SmartReminderSystem.getBillReminderTitle(type, data),
                    message: SmartReminderSystem.getBillReminderMessage(type, data)
                };
                
                const reminderDiv = document.createElement('div');
                reminderDiv.className = 'reminder-item';
                reminderDiv.innerHTML = `
                    <div class="reminder-title">${reminder.title}</div>
                    <div class="reminder-message">${reminder.message}</div>
                    <div class="reminder-actions">
                        <button class="reminder-action" onclick="this.parentElement.remove()">é—œé–‰</button>
                    </div>
                `;
                
                container.appendChild(reminderDiv);
                
            } catch (error) {
                showResult('billResults', `âŒ å‰µå»ºå¸³å–®æé†’å¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        // å¿«é€Ÿæ¸¬è©¦
        function quickTest(type) {
            const tests = {
                'high_spending': {
                    type: 'daily_limit',
                    amount: 5000,
                    description: 'ä»Šæ—¥æ¶ˆè²»è¶…æ¨™'
                },
                'investment_opportunity': {
                    type: 'opportunity',
                    amount: 100000,
                    description: 'å¸‚å ´æŠ•è³‡æ©Ÿæœƒ'
                },
                'bill_due': {
                    type: 'due_today',
                    name: 'é›»è²»',
                    amount: 1200,
                    dueDate: new Date().toISOString().split('T')[0]
                },
                'all_types': [
                    { type: 'trend', amount: 3000, description: 'æœ¬é€±æ¶ˆè²»å¢åŠ ' },
                    { type: 'cash_surplus', amount: 80000, description: 'ç¾é‡‘éå¤š' },
                    { type: 'upcoming', name: 'æ°´è²»', amount: 300, dueDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString().split('T')[0] }
                ]
            };
            
            const testData = tests[type];
            
            if (Array.isArray(testData)) {
                testData.forEach((test, index) => {
                    setTimeout(() => {
                        if (test.type === 'consumption') {
                            document.getElementById('consumptionType').value = test.type;
                            document.getElementById('consumptionAmount').value = test.amount;
                            document.getElementById('consumptionDescription').value = test.description;
                            testConsumptionReminder();
                        } else if (test.type === 'investment') {
                            document.getElementById('investmentType').value = test.type;
                            document.getElementById('investmentAmount').value = test.amount;
                            document.getElementById('investmentDescription').value = test.description;
                            testInvestmentReminder();
                        } else if (test.type === 'bill') {
                            document.getElementById('billType').value = test.type;
                            document.getElementById('billName').value = test.name;
                            document.getElementById('billAmount').value = test.amount;
                            document.getElementById('billDueDate').value = test.dueDate;
                            testBillReminder();
                        }
                    }, index * 1000);
                });
            } else {
                if (testData.type === 'consumption') {
                    document.getElementById('consumptionType').value = testData.type;
                    document.getElementById('consumptionAmount').value = testData.amount;
                    document.getElementById('consumptionDescription').value = testData.description;
                    testConsumptionReminder();
                } else if (testData.type === 'investment') {
                    document.getElementById('investmentType').value = testData.type;
                    document.getElementById('investmentAmount').value = testData.amount;
                    document.getElementById('investmentDescription').value = testData.description;
                    testInvestmentReminder();
                } else if (testData.type === 'bill') {
                    document.getElementById('billType').value = testData.type;
                    document.getElementById('billName').value = testData.name;
                    document.getElementById('billAmount').value = testData.amount;
                    document.getElementById('billDueDate').value = testData.dueDate;
                    testBillReminder();
                }
            }
        }
        
        // æ¸¬è©¦è¨­å®š
        function testSettings() {
            const container = document.getElementById('settingsResults');
            container.innerHTML = '';
            
            if (typeof SmartReminderSystem === 'undefined') {
                showResult('settingsResults', 'âŒ SmartReminderSystem æ¨¡çµ„æœªè¼‰å…¥', 'error');
                return;
            }
            
            try {
                const settings = SmartReminderSystem.settings;
                showResult('settingsResults', 'âœ… è¨­å®šè¼‰å…¥æˆåŠŸ', 'success');
                showResult('settingsResults', `æ¶ˆè²»æé†’: ${settings.consumptionReminders ? 'é–‹å•Ÿ' : 'é—œé–‰'}`, 'success');
                showResult('settingsResults', `æŠ•è³‡æé†’: ${settings.investmentReminders ? 'é–‹å•Ÿ' : 'é—œé–‰'}`, 'success');
                showResult('settingsResults', `å¸³å–®æé†’: ${settings.billReminders ? 'é–‹å•Ÿ' : 'é—œé–‰'}`, 'success');
                showResult('settingsResults', `æé†’æ™‚é–“: ${settings.reminderTime}`, 'success');
                showResult('settingsResults', `æé†’æ—¥æœŸ: ${settings.reminderDays.join(', ')}`, 'success');
            } catch (error) {
                showResult('settingsResults', `âŒ è¨­å®šè¼‰å…¥å¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        // æ¸¬è©¦è¨­å®šæ›´æ–°
        function testSettingsUpdate() {
            const container = document.getElementById('settingsResults');
            container.innerHTML = '';
            
            if (typeof SmartReminderSystem === 'undefined') {
                showResult('settingsResults', 'âŒ SmartReminderSystem æ¨¡çµ„æœªè¼‰å…¥', 'error');
                return;
            }
            
            try {
                const newSettings = {
                    consumptionReminders: false,
                    investmentReminders: true,
                    billReminders: true,
                    reminderTime: '10:00',
                    reminderDays: ['tuesday', 'thursday', 'saturday']
                };
                
                SmartReminderSystem.updateSettings(newSettings);
                showResult('settingsResults', 'âœ… è¨­å®šæ›´æ–°æˆåŠŸ', 'success');
                showResult('settingsResults', 'æ–°è¨­å®šå·²ä¿å­˜', 'success');
                
                // é©—è­‰è¨­å®š
                setTimeout(() => {
                    const updatedSettings = SmartReminderSystem.settings;
                    showResult('settingsResults', `æ¶ˆè²»æé†’: ${updatedSettings.consumptionReminders ? 'é–‹å•Ÿ' : 'é—œé–‰'}`, 'success');
                    showResult('settingsResults', `æŠ•è³‡æé†’: ${updatedSettings.investmentReminders ? 'é–‹å•Ÿ' : 'é—œé–‰'}`, 'success');
                    showResult('settingsResults', `å¸³å–®æé†’: ${updatedSettings.billReminders ? 'é–‹å•Ÿ' : 'é—œé–‰'}`, 'success');
                }, 500);
                
            } catch (error) {
                showResult('settingsResults', `âŒ è¨­å®šæ›´æ–°å¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        // é¡¯ç¤ºæé†’æ­·å²
        function showReminderHistory() {
            const container = document.getElementById('settingsResults');
            container.innerHTML = '';
            
            if (typeof SmartReminderSystem === 'undefined') {
                showResult('settingsResults', 'âŒ SmartReminderSystem æ¨¡çµ„æœªè¼‰å…¥', 'error');
                return;
            }
            
            try {
                const history = SmartReminderSystem.getReminderHistory();
                showResult('settingsResults', `æé†’æ­·å² (${history.length} æ¢)`, 'success');
                
                if (history.length === 0) {
                    showResult('settingsResults', 'æš«ç„¡æé†’æ­·å²', 'warning');
                    return;
                }
                
                history.slice(0, 5).forEach((reminder, index) => {
                    const reminderDiv = document.createElement('div');
                    reminderDiv.className = 'reminder-item';
                    reminderDiv.innerHTML = `
                        <div class="reminder-title">${reminder.title}</div>
                        <div class="reminder-message">${reminder.message}</div>
                        <div style="font-size: 12px; color: #999; margin-top: 8px;">
                            é¡å‹: ${reminder.type} | å­é¡å‹: ${reminder.subtype} | æ™‚é–“: ${new Date(reminder.timestamp).toLocaleString()}
                        </div>
                    `;
                    container.appendChild(reminderDiv);
                });
                
            } catch (error) {
                showResult('settingsResults', `âŒ é¡¯ç¤ºæé†’æ­·å²å¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        // æ¸…é™¤æé†’æ­·å²
        function clearReminderHistory() {
            const container = document.getElementById('settingsResults');
            container.innerHTML = '';
            
            if (typeof SmartReminderSystem === 'undefined') {
                showResult('settingsResults', 'âŒ SmartReminderSystem æ¨¡çµ„æœªè¼‰å…¥', 'error');
                return;
            }
            
            try {
                SmartReminderSystem.clearReminderHistory();
                showResult('settingsResults', 'âœ… æé†’æ­·å²å·²æ¸…é™¤', 'success');
            } catch (error) {
                showResult('settingsResults', `âŒ æ¸…é™¤æé†’æ­·å²å¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        // é¡¯ç¤ºçµæœçš„é€šç”¨å‡½æ•¸
        function showResult(containerId, content, type = 'success') {
            const container = document.getElementById(containerId);
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = content;
            container.appendChild(div);
        }
        
        // é é¢è¼‰å…¥å®Œæˆæ™‚è‡ªå‹•æª¢æŸ¥
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æ™ºæ…§æé†’ç³»çµ±æ¸¬è©¦é é¢å·²è¼‰å…¥');
            checkSystem();
        });
    </script>
</body>
</html>
